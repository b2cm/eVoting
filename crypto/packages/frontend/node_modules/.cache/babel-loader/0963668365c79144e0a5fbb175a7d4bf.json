{"ast":null,"code":"var _jsxFileName = \"/Users/kemlohalex/Documents/evoting/crypto/packages/frontend/src/pages/keygen/index.tsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { generatePair } from \"lrs\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport { Groups } from \"../../components/groups\";\nimport { BACKEND_URL } from \"../../connections/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function KeyGen() {\n  _s();\n  const [pair, setPair] = useState(null);\n  const [HashedID, setHashedID] = useState(null);\n  const [buttonEnable, setButtonEnable] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [HashedIds, setHashedIds] = useState(null);\n  const [groups, setGroups] = useState(null);\n  const generate = useCallback(() => {\n    setPair(generatePair());\n  }, []);\n  const fetchHashedIDs = async () => {\n    const {\n      data\n    } = await axios.get('http://bccm-s7.hs-mittweida.de:3100/getHashedIDs');\n    console.log(\"pls lev me alon \", data);\n    console.log(\"ids\", data[\"hashedIDs\"]);\n    setHashedIds(data[\"hashedIDs\"]);\n  };\n  useEffect(() => {\n    // Fetch data from an API or any other source\n    fetchHashedIDs();\n  }, []);\n  const submit = useCallback(() => {\n    const cb = async () => {\n      if (!pair) {\n        return;\n      }\n      let {\n        data\n      } = await axios.post(BACKEND_URL + \"/Vote/Voter\", {\n        pubKey: pair.publicKey.toString(16)\n      });\n      for (const id in data) {\n        data[id] = data[id].map(s => BigInt(\"0x\" + s));\n      }\n      setGroups(data);\n    };\n    const cb2 = async () => {\n      if (!pair) {\n        return;\n      }\n      // send hashedID to backend\n      await axios.post(BACKEND_URL + \"/Vote/HashedId\", {\n        pubKey: pair.publicKey.toString(16),\n        hashedId: HashedID\n      });\n    };\n    cb();\n    cb2();\n  }, [pair]);\n  const handlechange = useCallback(e => {\n    const inputHash = e.target.value;\n    console.log(\"hashedids \", HashedIds);\n    if (HashedIds && HashedIds.includes(inputHash)) {\n      setError(\"\");\n      setHashedID(inputHash);\n      setButtonEnable(false);\n    } else {\n      setError(\"HashedID is not valid\");\n    }\n  }, [HashedIds]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-semibold\",\n      children: \"Submit HashedID\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"fname\",\n      name: \"HashedId\",\n      onChange: handlechange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"err\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-semibold\",\n      children: \"Generate Key Pair\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"block blue-btn ripple\",\n      onClick: generate,\n      children: \"Generate Key\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), pair ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-semibold\",\n        children: \"Key Pair:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-xl font-semibold\",\n        children: \"Public Key:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"px-2 py-2 border rounded-md border-blue-500 break-all mx-5\",\n        children: pair.publicKey.toString(16)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-xl font-semibold\",\n        children: \"Private Key:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"px-2 py-2 border rounded-md border-blue-500 break-all mx-5\",\n        children: pair.privateKey.toString(16)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: buttonEnable,\n        onClick: submit,\n        className: \"block blue-btn ripple\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), groups ? /*#__PURE__*/_jsxDEV(Groups, {\n      groups: groups\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_s(KeyGen, \"DeNRwjN5Xv8b9CKJ5aB1U81HaN4=\");\n_c = KeyGen;\nvar _c;\n$RefreshReg$(_c, \"KeyGen\");","map":{"version":3,"names":["axios","generatePair","useCallback","useState","useEffect","Groups","BACKEND_URL","jsxDEV","_jsxDEV","Fragment","_Fragment","KeyGen","_s","pair","setPair","HashedID","setHashedID","buttonEnable","setButtonEnable","error","setError","HashedIds","setHashedIds","groups","setGroups","generate","fetchHashedIDs","data","get","console","log","submit","cb","post","pubKey","publicKey","toString","id","map","s","BigInt","cb2","hashedId","handlechange","e","inputHash","target","value","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","name","onChange","onClick","privateKey","disabled","_c","$RefreshReg$"],"sources":["/Users/kemlohalex/Documents/evoting/crypto/packages/frontend/src/pages/keygen/index.tsx"],"sourcesContent":["import axios, { AxiosResponse } from \"axios\";\nimport { generatePair, KeyPair } from \"lrs\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport { Groups } from \"../../components/groups\";\nimport { BACKEND_URL } from \"../../connections/api\";\n\n\nexport default function KeyGen() {\n  const [pair, setPair] = useState(null as null | KeyPair);\n  const [HashedID, setHashedID] = useState(null as null | string);\n  const [buttonEnable, setButtonEnable] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [HashedIds, setHashedIds] = useState<String[] |null>(null  )\n  const [groups, setGroups] = useState(\n    null as null | { [id: string]: bigint[] }\n  );\n\n  const generate = useCallback(() => {\n    setPair(generatePair());\n  }, []);\n\n\n  const fetchHashedIDs = async () => {\n    const {data } = await axios.get('http://bccm-s7.hs-mittweida.de:3100/getHashedIDs');\n    console.log(\"pls lev me alon \" , data)\n    console.log(\"ids\", data[\"hashedIDs\"])\n    setHashedIds(data[\"hashedIDs\"])\n\n  }\n\n\n\n\n  useEffect(() => {\n    // Fetch data from an API or any other source\n    fetchHashedIDs()\n  }, []);\n  const submit = useCallback(() => {\n    const cb = async () => {\n      if (!pair) {\n        return;\n      }\n      let { data } = await axios.post<\n        any,\n        AxiosResponse<{ [id: string]: any[] }>\n      >(BACKEND_URL + \"/Vote/Voter\", {\n        pubKey: pair.publicKey.toString(16),\n      });\n      for (const id in data) {\n        data[id] = data[id].map((s) => BigInt(\"0x\" + s));\n      }\n      setGroups(data);\n    };\n\n    const cb2 = async () => {\n      if (!pair) {\n        return;\n      }\n      // send hashedID to backend\n      await axios.post(BACKEND_URL + \"/Vote/HashedId\", {\n        pubKey: pair.publicKey.toString(16),\n        hashedId: HashedID,\n      });\n    };\n\n    cb();\n    cb2();\n  }, [pair]);\n\n  const handlechange = useCallback((e) => {\n    const inputHash = e.target.value;\n    console.log( \"hashedids \", HashedIds);\n    if (HashedIds && HashedIds!.includes(inputHash)) {\n\n      setError(\"\");\n      setHashedID(inputHash);\n      setButtonEnable(false);\n    } else {\n      setError(\"HashedID is not valid\");\n    }\n  }, [HashedIds]);\n\n  return (\n    <div className=\"flex flex-col items-center space-y-4\">\n      <h1 className=\"text-3xl font-semibold\">Submit HashedID</h1>\n      <input\n        type=\"text\"\n        id=\"fname\"\n        name=\"HashedId\"\n        onChange={handlechange}\n      ></input>\n      <div className=\"err\">{error}</div>\n\n      <h2 className=\"text-3xl font-semibold\">Generate Key Pair</h2>\n\n      <button className=\"block blue-btn ripple\" onClick={generate}>\n        Generate Key\n      </button>\n\n      {pair ? (\n        <>\n          <h3 className=\"text-2xl font-semibold\">Key Pair:</h3>\n          <h4 className=\"text-xl font-semibold\">Public Key:</h4>\n\n          <span className=\"px-2 py-2 border rounded-md border-blue-500 break-all mx-5\">\n            {pair.publicKey.toString(16)}\n          </span>\n\n          <h4 className=\"text-xl font-semibold\">Private Key:</h4>\n          <span className=\"px-2 py-2 border rounded-md border-blue-500 break-all mx-5\">\n            {pair.privateKey.toString(16)}\n          </span>\n\n          <button\n            disabled={buttonEnable}\n            onClick={submit}\n            className=\"block blue-btn ripple\"\n          >\n            Submit\n          </button>\n        </>\n      ) : (\n        <></>\n      )}\n\n      {groups ? <Groups groups={groups} /> : <></>}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}