{"ast":null,"code":"var _jsxFileName = \"/Users/kemlohalex/Documents/evoting/crypto/packages/frontend/src/pages/keygen/index.tsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { generatePair } from \"lrs\";\nimport { useCallback, useState } from \"react\";\nimport { Groups } from \"../../components/groups\";\nimport { BACKEND_URL } from \"../../connections/api\";\nimport { HashedIds } from \"../../util/leaves\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function KeyGen() {\n  _s();\n  const [pair, setPair] = useState(null);\n  const [HashedID, setHashedID] = useState(null);\n  const [buttonEnable, setButtonEnable] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [groups, setGroups] = useState(null);\n  const generate = useCallback(() => {\n    setPair(generatePair());\n  }, []);\n  const submit = useCallback(() => {\n    const cb = async () => {\n      if (!pair) {\n        return;\n      }\n      let {\n        data\n      } = await axios.post(BACKEND_URL + \"/Vote/Voter\", {\n        pubKey: pair.publicKey.toString(16)\n      });\n      for (const id in data) {\n        data[id] = data[id].map(s => BigInt(\"0x\" + s));\n      }\n      setGroups(data);\n    };\n    const cb2 = async () => {\n      if (!pair) {\n        return;\n      }\n      // send hashedID to backend\n      await axios.post(BACKEND_URL + \"/Vote/HashedId\", {\n        pubKey: pair.publicKey.toString(16),\n        hashedId: HashedID\n      });\n    };\n    cb();\n    cb2();\n  }, [pair]);\n  const handlechange = useCallback(e => {\n    const inputHash = e.target.value;\n    if (HashedIds.includes(inputHash)) {\n      setError(\"\");\n      setHashedID(inputHash);\n      setButtonEnable(false);\n    } else {\n      setError(\"HashedID is not valid\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-semibold\",\n      children: \"Submit HashedID\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"fname\",\n      name: \"HashedId\",\n      onChange: handlechange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"err\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-semibold\",\n      children: \"Generate Key Pair\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"block blue-btn ripple\",\n      onClick: generate,\n      children: \"Generate Key\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), pair ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-semibold\",\n        children: \"Key Pair:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-xl font-semibold\",\n        children: \"Public Key:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"px-2 py-2 border rounded-md border-blue-500 break-all mx-5\",\n        children: pair.publicKey.toString(16)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-xl font-semibold\",\n        children: \"Private Key:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"px-2 py-2 border rounded-md border-blue-500 break-all mx-5\",\n        children: pair.privateKey.toString(16)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: buttonEnable,\n        onClick: submit,\n        className: \"block blue-btn ripple\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), groups ? /*#__PURE__*/_jsxDEV(Groups, {\n      groups: groups\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(KeyGen, \"34sVV7pwGiXe6L5KRaWowhdaDR0=\");\n_c = KeyGen;\nvar _c;\n$RefreshReg$(_c, \"KeyGen\");","map":{"version":3,"names":["axios","generatePair","useCallback","useState","Groups","BACKEND_URL","HashedIds","jsxDEV","_jsxDEV","Fragment","_Fragment","KeyGen","_s","pair","setPair","HashedID","setHashedID","buttonEnable","setButtonEnable","error","setError","groups","setGroups","generate","submit","cb","data","post","pubKey","publicKey","toString","id","map","s","BigInt","cb2","hashedId","handlechange","e","inputHash","target","value","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","name","onChange","onClick","privateKey","disabled","_c","$RefreshReg$"],"sources":["/Users/kemlohalex/Documents/evoting/crypto/packages/frontend/src/pages/keygen/index.tsx"],"sourcesContent":["import axios, { AxiosResponse } from \"axios\";\nimport { generatePair, KeyPair } from \"lrs\";\nimport { useCallback, useState } from \"react\";\nimport { Groups } from \"../../components/groups\";\nimport { BACKEND_URL } from \"../../connections/api\";\nimport { HashedIds } from \"../../util/leaves\";\n\nexport default function KeyGen() {\n  const [pair, setPair] = useState(null as null | KeyPair);\n  const [HashedID, setHashedID] = useState(null as null | string);\n  const [buttonEnable, setButtonEnable] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  const [groups, setGroups] = useState(\n    null as null | { [id: string]: bigint[] }\n  );\n\n  const generate = useCallback(() => {\n    setPair(generatePair());\n  }, []);\n\n  const submit = useCallback(() => {\n    const cb = async () => {\n      if (!pair) {\n        return;\n      }\n      let { data } = await axios.post<\n        any,\n        AxiosResponse<{ [id: string]: any[] }>\n      >(BACKEND_URL + \"/Vote/Voter\", {\n        pubKey: pair.publicKey.toString(16),\n      });\n      for (const id in data) {\n        data[id] = data[id].map((s) => BigInt(\"0x\" + s));\n      }\n      setGroups(data);\n    };\n\n    const cb2 = async () => {\n      if (!pair) {\n        return;\n      }\n      // send hashedID to backend\n      await axios.post(BACKEND_URL + \"/Vote/HashedId\", {\n        pubKey: pair.publicKey.toString(16),\n        hashedId: HashedID,\n      });\n    };\n\n    cb();\n    cb2();\n  }, [pair]);\n\n  const handlechange = useCallback((e) => {\n    const inputHash = e.target.value;\n\n    if (HashedIds.includes(inputHash)) {\n      setError(\"\");\n      setHashedID(inputHash);\n      setButtonEnable(false);\n    } else {\n      setError(\"HashedID is not valid\");\n    }\n  }, []);\n\n  return (\n    <div className=\"flex flex-col items-center space-y-4\">\n      <h1 className=\"text-3xl font-semibold\">Submit HashedID</h1>\n      <input\n        type=\"text\"\n        id=\"fname\"\n        name=\"HashedId\"\n        onChange={handlechange}\n      ></input>\n      <div className=\"err\">{error}</div>\n\n      <h2 className=\"text-3xl font-semibold\">Generate Key Pair</h2>\n\n      <button className=\"block blue-btn ripple\" onClick={generate}>\n        Generate Key\n      </button>\n\n      {pair ? (\n        <>\n          <h3 className=\"text-2xl font-semibold\">Key Pair:</h3>\n          <h4 className=\"text-xl font-semibold\">Public Key:</h4>\n\n          <span className=\"px-2 py-2 border rounded-md border-blue-500 break-all mx-5\">\n            {pair.publicKey.toString(16)}\n          </span>\n\n          <h4 className=\"text-xl font-semibold\">Private Key:</h4>\n          <span className=\"px-2 py-2 border rounded-md border-blue-500 break-all mx-5\">\n            {pair.privateKey.toString(16)}\n          </span>\n\n          <button\n            disabled={buttonEnable}\n            onClick={submit}\n            className=\"block blue-btn ripple\"\n          >\n            Submit\n          </button>\n        </>\n      ) : (\n        <></>\n      )}\n\n      {groups ? <Groups groups={groups} /> : <></>}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}